<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>godspead的全栈文档</title>
    <meta name="description" content="记录我学过的一切">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.CwNnKCVM.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CjjlkSPj.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.dyN886cm.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BR0IJ75L.js">
    <link rel="modulepreload" href="/assets/notes_core_架构部分_Servlet.md.BFaqCxEs.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>godspead的全栈文档</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-afb2845e data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-bfe7971f><span class="text" data-v-bfe7971f><!----><span data-v-bfe7971f>前端</span><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><div class="items" data-v-20ed86d6><!--[--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/notes/frontend/js.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>JavaScript</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/notes/frontend/vue.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Vue</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-20ed86d6 data-v-7eeeb2dc><a class="VPLink link" href="/notes/frontend/css.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>CSS</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-6b867909><button data-v-6b867909>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-0009425e><div class="item" role="button" tabindex="0" data-v-0009425e><div class="indicator" data-v-0009425e></div><h2 class="text" data-v-0009425e>Examples</h2><!----></div><div class="items" data-v-0009425e><!--[--><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/markdown-examples.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Markdown Examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-0009425e data-v-0009425e><div class="item" data-v-0009425e><div class="indicator" data-v-0009425e></div><a class="VPLink link link" href="/api-examples.html" data-v-0009425e><!--[--><p class="text" data-v-0009425e>Runtime API Examples</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _notes_core_%E6%9E%B6%E6%9E%84%E9%83%A8%E5%88%86_Servlet" data-v-e6f2a212><div><h1 id="" tabindex="-1"><a class="header-anchor" href="#" aria-label="Permalink to &quot;&quot;">​</a></h1><h1 id="javaweb-servlet-全解析-基础-进阶" tabindex="-1">JavaWeb Servlet 全解析（基础+进阶） <a class="header-anchor" href="#javaweb-servlet-全解析-基础-进阶" aria-label="Permalink to &quot;JavaWeb Servlet 全解析（基础+进阶）&quot;">​</a></h1><p>Servlet 是 JavaWeb 核心组件之一，本质是运行在 Web 服务器（如 Tomcat）上的 Java 类，用于扩展 HTTP 服务器功能，处理客户端（浏览器）请求并返回响应，是客户端与服务器端数据交互的核心桥梁。</p><h2 id="一、servlet-核心基础" tabindex="-1">一、Servlet 核心基础 <a class="header-anchor" href="#一、servlet-核心基础" aria-label="Permalink to &quot;一、Servlet 核心基础&quot;">​</a></h2><h3 id="_1-1-定义与核心作用" tabindex="-1">1.1 定义与核心作用 <a class="header-anchor" href="#_1-1-定义与核心作用" aria-label="Permalink to &quot;1.1 定义与核心作用&quot;">​</a></h3><ul><li><strong>本质</strong>：运行在 Web 服务器（Tomcat）中的 Java 对象，不直接独立运行，需由服务器调用</li><li><strong>核心职责</strong>： <ul><li>接收客户端（浏览器）的 HTTP 请求（包含请求行、请求头、请求体数据）</li><li>调用后端业务逻辑处理请求数据</li><li>构建 HTTP 响应（响应行、响应头、响应体）并返回给客户端</li></ul></li><li><strong>核心价值</strong>：解决了静态网页无法动态处理请求的问题，实现了动态网页开发与数据交互</li></ul><h3 id="_1-2-环境搭建-maven-web-项目" tabindex="-1">1.2 环境搭建（Maven Web 项目） <a class="header-anchor" href="#_1-2-环境搭建-maven-web-项目" aria-label="Permalink to &quot;1.2 环境搭建（Maven Web 项目）&quot;">​</a></h3><h4 id="_1-2-1-项目创建-骨架方式" tabindex="-1">1.2.1 项目创建（骨架方式） <a class="header-anchor" href="#_1-2-1-项目创建-骨架方式" aria-label="Permalink to &quot;1.2.1 项目创建（骨架方式）&quot;">​</a></h4><ol><li>选择 Maven 骨架：<code>org.apache.maven.archetypes:maven-archetype-webapp</code></li><li>配置项目坐标（GroupId、ArtifactId、Version）</li><li>选择 Maven 环境（本地仓库、settings.xml）</li><li>补全项目结构： <ol><li>手动创建 <code>src/main/java</code>（源代码目录）</li><li>手动创建 <code>src/main/resources</code>（资源文件目录）</li><li>确认 <code>webapp/WEB-INF</code> 目录下存在 <code>web.xml</code>（部署描述符）</li></ol></li></ol><h4 id="_1-2-2-依赖配置-pom-xml" tabindex="-1">1.2.2 依赖配置（pom.xml） <a class="header-anchor" href="#_1-2-2-依赖配置-pom-xml" aria-label="Permalink to &quot;1.2.2 依赖配置（pom.xml）&quot;">​</a></h4><p>需引入 Servlet API 依赖（Tomcat 内置该 API，但开发时需依赖编译）：</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- Servlet API 依赖 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;javax.servlet&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;javax.servlet-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;4.0.1&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;provided&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 编译时有效，运行时由 Tomcat 提供，避免冲突 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="_1-3-servlet-实现方式" tabindex="-1">1.3 Servlet 实现方式 <a class="header-anchor" href="#_1-3-servlet-实现方式" aria-label="Permalink to &quot;1.3 Servlet 实现方式&quot;">​</a></h3><h4 id="_1-3-1-注解方式-推荐-servlet-3-0-支持" tabindex="-1">1.3.1 注解方式（推荐，Servlet 3.0+ 支持） <a class="header-anchor" href="#_1-3-1-注解方式-推荐-servlet-3-0-支持" aria-label="Permalink to &quot;1.3.1 注解方式（推荐，Servlet 3.0+ 支持）&quot;">​</a></h4><ol><li>创建 Java 类，继承 <code>HttpServlet</code>（对 Servlet 接口的 HTTP 协议封装，无需重写所有接口方法）</li><li>重写 <code>doGet()</code>（处理 GET 请求）和 <code>doPost()</code>（处理 POST 请求）方法</li><li>添加 <code>@WebServlet</code> 注解，配置访问路径</li></ol><p><strong>示例代码</strong>：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.servlet.annotation.WebServlet;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.servlet.http.HttpServlet;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.servlet.http.HttpServletRequest;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> javax.servlet.http.HttpServletResponse;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.io.IOException;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 配置访问路径：/demo（可配置多个路径）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WebServlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/demo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServletDemo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpServlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 处理 GET 请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, HttpServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello Servlet!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 响应字符数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 处理 POST 请求</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doPost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">req</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, HttpServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        doGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 复用 GET 逻辑（实际开发可按需单独实现）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_1-3-2-xml-配置方式-兼容旧版本" tabindex="-1">1.3.2 XML 配置方式（兼容旧版本） <a class="header-anchor" href="#_1-3-2-xml-配置方式-兼容旧版本" aria-label="Permalink to &quot;1.3.2 XML 配置方式（兼容旧版本）&quot;">​</a></h4><p>若不使用注解，可在 <code>web.xml</code> 中配置 Servlet 映射关系：</p><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 配置 Servlet 类信息 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ServletDemo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 逻辑名称，需与映射一致 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;com.example.ServletDemo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 全类名 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 配置访问路径映射 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-mapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ServletDemo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 与上方 servlet-name 对应 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url-pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;/demo&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">url-pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 访问路径 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">servlet-mapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="二、servlet-生命周期" tabindex="-1">二、Servlet 生命周期 <a class="header-anchor" href="#二、servlet-生命周期" aria-label="Permalink to &quot;二、Servlet 生命周期&quot;">​</a></h2><p>Servlet 由 Web 服务器（Tomcat）管理生命周期，共分为 4 个阶段，核心是「单例多线程」（一个 Servlet 类仅创建一个实例，多请求并发调用 <code>service()</code> 方法）。</p><h3 id="_2-1-生命周期四阶段" tabindex="-1">2.1 生命周期四阶段 <a class="header-anchor" href="#_2-1-生命周期四阶段" aria-label="Permalink to &quot;2.1 生命周期四阶段&quot;">​</a></h3><table tabindex="0"><thead><tr><th>阶段</th><th>触发时机</th><th>核心方法</th><th>说明</th></tr></thead><tbody><tr><td>加载与实例化</td><td>1. 默认：第一次访问 Servlet 时<br>2. 配置 <code>loadOnStartup</code>：服务器启动时</td><td>类的构造方法（由容器调用）</td><td>仅执行 1 次，创建 Servlet 实例</td></tr><tr><td>初始化</td><td>实例化后立即执行</td><td><code>init(ServletConfig config)</code></td><td>仅执行 1 次，用于初始化资源（如连接数据库、加载配置文件）</td></tr><tr><td>请求处理</td><td>每次客户端请求该 Servlet 时</td><td><code>service(HttpServletRequest req, HttpServletResponse resp)</code></td><td>多次执行，核心业务逻辑处理（自动根据请求方式调用 <code>doGet()</code>/<code>doPost()</code>）</td></tr><tr><td>服务终止</td><td>服务器关闭（正常关闭）或应用卸载时</td><td><code>destroy()</code></td><td>仅执行 1 次，用于释放资源（如关闭数据库连接、释放文件句柄）</td></tr></tbody></table><h3 id="_2-2-关键配置-loadonstartup" tabindex="-1">2.2 关键配置：loadOnStartup <a class="header-anchor" href="#_2-2-关键配置-loadonstartup" aria-label="Permalink to &quot;2.2 关键配置：loadOnStartup&quot;">​</a></h3><p>通过 <code>@WebServlet</code> 的 <code>loadOnStartup</code> 属性控制实例化时机：</p><ul><li>负数（默认值）：第一次访问时实例化</li><li>0 或正整数：服务器启动时实例化，数字越小，创建优先级越高（例如 <code>loadOnStartup=1</code> 比 <code>loadOnStartup=2</code> 先创建）</li></ul><p><strong>示例</strong>：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 服务器启动时创建 Servlet 实例，优先级 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WebServlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/demo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">loadOnStartup</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServletDemo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpServlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="三、servlet-体系结构" tabindex="-1">三、Servlet 体系结构 <a class="header-anchor" href="#三、servlet-体系结构" aria-label="Permalink to &quot;三、Servlet 体系结构&quot;">​</a></h2><p>Servlet 核心是接口与实现类的分层设计，开发者无需直接实现 <code>Servlet</code> 根接口，而是继承封装后的 <code>HttpServlet</code>，简化开发。</p><h3 id="_3-1-体系结构层级" tabindex="-1">3.1 体系结构层级 <a class="header-anchor" href="#_3-1-体系结构层级" aria-label="Permalink to &quot;3.1 体系结构层级&quot;">​</a></h3><div class="language-Plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Servlet（根接口） ← GenericServlet（抽象类，适配 Servlet 接口，简化配置处理） ← HttpServlet（抽象类，HTTP 协议封装） ← 自定义 Servlet 类（开发者实现）</span></span></code></pre></div><ul><li><strong>Servlet 接口</strong>：定义核心生命周期方法（<code>init()</code>、<code>service()</code>、<code>destroy()</code>）</li><li><strong>GenericServlet</strong>：实现 <code>Servlet</code> 接口，提供 <code>ServletConfig</code> 配置获取、日志输出等通用功能</li><li><strong>HttpServlet</strong>：继承 <code>GenericServlet</code>，针对 HTTP 协议优化： <ul><li>重写 <code>service()</code> 方法，自动解析请求方式（GET/POST/PUT/DELETE 等）</li><li>提供 <code>doGet()</code>、<code>doPost()</code> 等方法，开发者按需重写即可（无需处理请求方式判断）</li></ul></li></ul><h2 id="四、servlet-访问路径配置" tabindex="-1">四、Servlet 访问路径配置 <a class="header-anchor" href="#四、servlet-访问路径配置" aria-label="Permalink to &quot;四、Servlet 访问路径配置&quot;">​</a></h2><p>一个 Servlet 可配置多个访问路径，路径规则分为 4 类，优先级：<strong>精确匹配 &gt; 目录匹配 &gt; 扩展匹配 &gt; 任意匹配</strong>。</p><h3 id="_4-1-路径分类与示例" tabindex="-1">4.1 路径分类与示例 <a class="header-anchor" href="#_4-1-路径分类与示例" aria-label="Permalink to &quot;4.1 路径分类与示例&quot;">​</a></h3><table tabindex="0"><thead><tr><th>路径类型</th><th>格式规则</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td>精确匹配</td><td>完整路径（不含通配符）</td><td><code>/demo</code>、<code>/user/login</code></td><td>仅匹配指定路径，优先级最高</td></tr><tr><td>目录匹配</td><td>以 <code>/</code> 开头，以 <code>*</code> 结尾</td><td><code>/user/*</code>、<code>/admin/*</code></td><td>匹配指定目录下的所有请求（如 <code>/user/list</code>、<code>/user/add</code> 均匹配 <code>/user/*</code>）</td></tr><tr><td>扩展匹配</td><td>以 <code>*</code> 开头，后跟扩展名</td><td><code>*.do</code>、<code>*.action</code></td><td>匹配指定扩展名的请求（如 <code>/login.do</code>、<code>/user/list.do</code> 均匹配 <code>*.do</code>）</td></tr><tr><td>任意匹配</td><td><code>/</code> 或 <code>/*</code></td><td><code>/</code>、<code>/*</code></td><td>- <code>/</code>：覆盖 Tomcat 默认的 DefaultServlet，处理所有未匹配的请求（包括静态资源）<br>- <code>/*</code>：匹配所有请求（包括其他 Servlet 路径），慎用</td></tr></tbody></table><h3 id="_4-2-多路径配置" tabindex="-1">4.2 多路径配置 <a class="header-anchor" href="#_4-2-多路径配置" aria-label="Permalink to &quot;4.2 多路径配置&quot;">​</a></h3><p>通过 <code>@WebServlet</code> 的 <code>value</code> 或 <code>urlPatterns</code> 属性配置多个路径：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 多个路径均可访问该 Servlet</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WebServlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">urlPatterns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/demo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/user/info&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ServletDemo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpServlet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_4-3-静态资源访问问题" tabindex="-1">4.3 静态资源访问问题 <a class="header-anchor" href="#_4-3-静态资源访问问题" aria-label="Permalink to &quot;4.3 静态资源访问问题&quot;">​</a></h3><ul><li>若 Servlet 路径配置为 <code>/</code>，会覆盖 Tomcat 内置的 <code>DefaultServlet</code>（负责处理静态资源如 HTML、CSS、JS、图片等），导致静态资源无法访问。</li><li>解决方案： <ul><li>避免使用 <code>/</code> 作为 Servlet 路径，改用精确匹配或目录匹配</li><li>若需使用 <code>/</code>，需手动配置静态资源映射（如 SpringMVC 中的 <code>&lt;mvc:resources&gt;</code>，或 Tomcat 配置）</li></ul></li></ul><h2 id="五、request-对象-获取请求数据" tabindex="-1">五、Request 对象（获取请求数据） <a class="header-anchor" href="#五、request-对象-获取请求数据" aria-label="Permalink to &quot;五、Request 对象（获取请求数据）&quot;">​</a></h2><p><code>HttpServletRequest</code> 封装了客户端的 HTTP 请求信息，提供一系列方法获取请求行、请求头、请求体数据，是 Servlet 接收请求的核心对象。</p><h3 id="_5-1-继承体系" tabindex="-1">5.1 继承体系 <a class="header-anchor" href="#_5-1-继承体系" aria-label="Permalink to &quot;5.1 继承体系&quot;">​</a></h3><div class="language-Plain vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Plain</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ServletRequest（根接口） ← HttpServletRequest（HTTP 协议专用接口） ← RequestFacade（Tomcat 实现类，由服务器创建并传入方法）</span></span></code></pre></div><p>开发者无需关注实现类，直接通过方法参数使用 <code>HttpServletRequest</code> 即可。</p><h3 id="_5-2-核心方法-获取请求数据" tabindex="-1">5.2 核心方法（获取请求数据） <a class="header-anchor" href="#_5-2-核心方法-获取请求数据" aria-label="Permalink to &quot;5.2 核心方法（获取请求数据）&quot;">​</a></h3><h4 id="_5-2-1-获取请求行数据" tabindex="-1">5.2.1 获取请求行数据 <a class="header-anchor" href="#_5-2-1-获取请求行数据" aria-label="Permalink to &quot;5.2.1 获取请求行数据&quot;">​</a></h4><p>请求行格式：<code>请求方法 请求URI?查询字符串 HTTP/协议版本</code>（例：<code>GET /demo?name=zhangsan HTTP/1.1</code>）</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th><th>示例结果</th></tr></thead><tbody><tr><td><code>String getMethod()</code></td><td>获取请求方法（GET/POST/PUT 等）</td><td><code>GET</code></td></tr><tr><td><code>String getRequestURI()</code></td><td>获取请求 URI（虚拟目录+资源路径）</td><td><code>/web-demo/demo</code></td></tr><tr><td><code>String getContextPath()</code></td><td>获取项目虚拟目录（部署时配置）</td><td><code>/web-demo</code></td></tr><tr><td><code>StringBuffer getRequestURL()</code></td><td>获取完整请求 URL（含协议、域名、端口）</td><td><code>http://localhost:8080/web-demo/demo</code></td></tr><tr><td><code>String getQueryString()</code></td><td>获取 URL 中的查询字符串（GET 请求参数）</td><td><code>name=zhangsan&amp;age=20</code></td></tr></tbody></table><h4 id="_5-2-2-获取请求头数据" tabindex="-1">5.2.2 获取请求头数据 <a class="header-anchor" href="#_5-2-2-获取请求头数据" aria-label="Permalink to &quot;5.2.2 获取请求头数据&quot;">​</a></h4><p>请求头是客户端向服务器传递的附加信息（如浏览器类型、请求编码、Cookie 等）：</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><code>String getHeader(String name)</code></td><td>根据头名称获取头值</td><td><code>getHeader(&quot;User-Agent&quot;)</code> → 浏览器类型</td></tr><tr><td><code>Enumeration&lt;String&gt; getHeaderNames()</code></td><td>获取所有请求头名称</td><td>遍历所有头信息</td></tr></tbody></table><p><strong>示例</strong>：获取浏览器类型</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String userAgent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;User-Agent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;浏览器类型：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userAgent);</span></span></code></pre></div><h4 id="_5-2-3-获取请求体数据" tabindex="-1">5.2.3 获取请求体数据 <a class="header-anchor" href="#_5-2-3-获取请求体数据" aria-label="Permalink to &quot;5.2.3 获取请求体数据&quot;">​</a></h4><p>请求体用于存储 POST 请求的参数（如表单提交、JSON 数据），GET 请求无请求体（参数在 URL 中）：</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th><th>适用场景</th></tr></thead><tbody><tr><td><code>BufferedReader getReader()</code></td><td>获取字符流（按行读取文本数据）</td><td>表单提交（<code>application/x-www-form-urlencoded</code>）、JSON 文本</td></tr><tr><td><code>ServletInputStream getInputStream()</code></td><td>获取字节流</td><td>文件上传（<code>multipart/form-data</code>）、二进制数据</td></tr></tbody></table><h4 id="_5-2-4-通用参数获取-get-post-兼容" tabindex="-1">5.2.4 通用参数获取（GET/POST 兼容） <a class="header-anchor" href="#_5-2-4-通用参数获取-get-post-兼容" aria-label="Permalink to &quot;5.2.4 通用参数获取（GET/POST 兼容）&quot;">​</a></h4><p>Request 对象会自动封装所有请求参数（GET 从查询字符串、POST 从请求体）到一个 Map 中，提供通用方法获取，无需区分请求方式：</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><code>String getParameter(String name)</code></td><td>根据参数名获取单个值</td><td><code>req.getParameter(&quot;name&quot;)</code> → <code>zhangsan</code></td></tr><tr><td><code>String[] getParameterValues(String name)</code></td><td>根据参数名获取多个值（如复选框）</td><td><code>req.getParameterValues(&quot;hobby&quot;)</code> → <code>[&quot;game&quot;, &quot;music&quot;]</code></td></tr><tr><td><code>Map&lt;String, String[]&gt; getParameterMap()</code></td><td>获取所有参数的 Map 集合</td><td>遍历所有参数</td></tr></tbody></table><p><strong>示例</strong>：获取表单参数</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 表单提交：name=zhangsan&amp;age=20&amp;hobby=game&amp;hobby=music</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParameter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// zhangsan</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String age </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParameter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;age&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 20</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] hobbies </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParameterValues</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hobby&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [&quot;game&quot;, &quot;music&quot;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]&gt; paramMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParameterMap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 所有参数</span></span></code></pre></div><h3 id="_5-3-乱码问题解决" tabindex="-1">5.3 乱码问题解决 <a class="header-anchor" href="#_5-3-乱码问题解决" aria-label="Permalink to &quot;5.3 乱码问题解决&quot;">​</a></h3><h4 id="_5-3-1-post-请求乱码" tabindex="-1">5.3.1 POST 请求乱码 <a class="header-anchor" href="#_5-3-1-post-请求乱码" aria-label="Permalink to &quot;5.3.1 POST 请求乱码&quot;">​</a></h4><p>POST 请求参数在请求体中，默认编码为 <code>ISO-8859-1</code>（不支持中文），需在获取参数前设置编码：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置请求体编码（仅对 POST 有效）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCharacterEncoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="_5-3-2-get-请求乱码-tomcat-8-已解决" tabindex="-1">5.3.2 GET 请求乱码（Tomcat 8+ 已解决） <a class="header-anchor" href="#_5-3-2-get-请求乱码-tomcat-8-已解决" aria-label="Permalink to &quot;5.3.2 GET 请求乱码（Tomcat 8+ 已解决）&quot;">​</a></h4><ul><li>Tomcat 8 及以上版本：默认对 GET 请求的查询字符串使用 <code>UTF-8</code> 编码，无需处理</li><li>Tomcat 7 及以下版本：需修改 <code>conf/server.xml</code> 配置，添加 <code>URIEncoding=&quot;UTF-8&quot;</code>： <ul><li><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Connector</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8080&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> protocol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HTTP/1.1&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             connectionTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;20000&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             redirectPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8443&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URIEncoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div></li></ul></li></ul><h3 id="_5-4-请求转发-服务器内部跳转" tabindex="-1">5.4 请求转发（服务器内部跳转） <a class="header-anchor" href="#_5-4-请求转发-服务器内部跳转" aria-label="Permalink to &quot;5.4 请求转发（服务器内部跳转）&quot;">​</a></h3><p>请求转发是服务器内部的资源跳转方式，通过 <code>Request</code> 对象实现，适用于多个资源协同处理请求。</p><h4 id="_5-4-1-实现方式" tabindex="-1">5.4.1 实现方式 <a class="header-anchor" href="#_5-4-1-实现方式" aria-label="Permalink to &quot;5.4.1 实现方式&quot;">​</a></h4><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1. 获取转发器（目标资源路径，无需虚拟目录）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">RequestDispatcher dispatcher </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequestDispatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 2. 执行转发（传递 request 和 response 对象）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatcher.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp);</span></span></code></pre></div><h4 id="_5-4-2-核心特点" tabindex="-1">5.4.2 核心特点 <a class="header-anchor" href="#_5-4-2-核心特点" aria-label="Permalink to &quot;5.4.2 核心特点&quot;">​</a></h4><ol><li>浏览器地址栏路径<strong>不发生变化</strong>（始终显示第一次请求的路径）</li><li>仅能转发到<strong>当前服务器的内部资源</strong>（不能转发到外部网站）</li><li>本质是<strong>一次请求</strong>（request 和 response 对象被复用）</li><li>可通过 <code>Request</code> 域传递数据（多个资源共享数据）</li></ol><h4 id="_5-4-3-request-域对象-数据传递" tabindex="-1">5.4.3 Request 域对象（数据传递） <a class="header-anchor" href="#_5-4-3-request-域对象-数据传递" aria-label="Permalink to &quot;5.4.3 Request 域对象（数据传递）&quot;">​</a></h4><p>Request 域是基于一次请求的临时数据存储区域，适用于转发场景下的资源间数据共享：</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th></tr></thead><tbody><tr><td><code>void setAttribute(String name, Object value)</code></td><td>存储数据到域中</td></tr><tr><td><code>Object getAttribute(String name)</code></td><td>从域中获取数据</td></tr><tr><td><code>void removeAttribute(String name)</code></td><td>从域中删除数据</td></tr></tbody></table><p><strong>示例</strong>：转发时传递数据</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 源 Servlet</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;转发成功！&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 存储数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequestDispatcher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forward</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(req, resp); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 转发</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 目标 Servlet</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (String) req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 输出：转发成功！</span></span></code></pre></div><h2 id="六、response-对象-设置响应数据" tabindex="-1">六、Response 对象（设置响应数据） <a class="header-anchor" href="#六、response-对象-设置响应数据" aria-label="Permalink to &quot;六、Response 对象（设置响应数据）&quot;">​</a></h2><p><code>HttpServletResponse</code> 封装了服务器对客户端的 HTTP 响应信息，用于设置响应行、响应头、响应体，最终返回给客户端。</p><h3 id="_6-1-核心方法-设置响应数据" tabindex="-1">6.1 核心方法（设置响应数据） <a class="header-anchor" href="#_6-1-核心方法-设置响应数据" aria-label="Permalink to &quot;6.1 核心方法（设置响应数据）&quot;">​</a></h3><h4 id="_6-1-1-设置响应行" tabindex="-1">6.1.1 设置响应行 <a class="header-anchor" href="#_6-1-1-设置响应行" aria-label="Permalink to &quot;6.1.1 设置响应行&quot;">​</a></h4><p>响应行格式：<code>HTTP/协议版本 状态码 状态描述</code>（例：<code>HTTP/1.1 200 OK</code>）</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><code>void setStatus(int sc)</code></td><td>设置响应状态码</td><td><code>setState(200)</code>（成功）、<code>setState(404)</code>（资源未找到）</td></tr></tbody></table><h4 id="_6-1-2-设置响应头" tabindex="-1">6.1.2 设置响应头 <a class="header-anchor" href="#_6-1-2-设置响应头" aria-label="Permalink to &quot;6.1.2 设置响应头&quot;">​</a></h4><p>响应头是服务器向客户端传递的附加信息（如响应编码、重定向地址、缓存策略等）：</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th><th>示例</th></tr></thead><tbody><tr><td><code>void setHeader(String name, String value)</code></td><td>设置响应头（覆盖原有值）</td><td><code>setHeader(&quot;Content-Type&quot;, &quot;text/html;charset=utf-8&quot;)</code></td></tr><tr><td><code>void addHeader(String name, String value)</code></td><td>添加响应头（不覆盖原有值）</td><td><code>addHeader(&quot;Set-Cookie&quot;, &quot;username=zhangsan&quot;)</code></td></tr></tbody></table><h4 id="_6-1-3-设置响应体" tabindex="-1">6.1.3 设置响应体 <a class="header-anchor" href="#_6-1-3-设置响应体" aria-label="Permalink to &quot;6.1.3 设置响应体&quot;">​</a></h4><p>响应体是服务器返回给客户端的核心数据（如 HTML 页面、JSON 数据、图片等）：</p><table tabindex="0"><thead><tr><th>方法</th><th>作用</th><th>适用场景</th></tr></thead><tbody><tr><td><code>PrintWriter getWriter()</code></td><td>获取字符输出流</td><td>输出文本数据（HTML、JSON、普通字符串）</td></tr><tr><td><code>ServletOutputStream getOutputStream()</code></td><td>获取字节输出流</td><td>输出二进制数据（图片、文件下载）</td></tr></tbody></table><h3 id="_6-2-响应乱码解决" tabindex="-1">6.2 响应乱码解决 <a class="header-anchor" href="#_6-2-响应乱码解决" aria-label="Permalink to &quot;6.2 响应乱码解决&quot;">​</a></h3><p>响应数据默认编码为 <code>ISO-8859-1</code>（不支持中文），需通过响应头设置编码：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 方式 1：设置响应头（推荐，同时指定客户端解码方式）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/html;charset=utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 方式 2：简化方法（等价于方式 1）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setContentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/html;charset=utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>注意：需在调用 <code>getWriter()</code> 或 <code>getOutputStream()</code> 前设置，否则无效。</p><h3 id="_6-3-重定向-客户端跳转" tabindex="-1">6.3 重定向（客户端跳转） <a class="header-anchor" href="#_6-3-重定向-客户端跳转" aria-label="Permalink to &quot;6.3 重定向（客户端跳转）&quot;">​</a></h3><p>重定向是服务器通知客户端重新向新地址发送请求的跳转方式，适用于资源位置变更或跨资源跳转。</p><h4 id="_6-3-1-实现方式" tabindex="-1">6.3.1 实现方式 <a class="header-anchor" href="#_6-3-1-实现方式" aria-label="Permalink to &quot;6.3.1 实现方式&quot;">​</a></h4><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 方式 1：手动设置状态码和响应头</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">302</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 302 是重定向状态码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setHeader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Location&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/web-demo/target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 目标资源路径（需含虚拟目录）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 方式 2：简化方法（推荐）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendRedirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/web-demo/target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h4 id="_6-3-2-核心特点" tabindex="-1">6.3.2 核心特点 <a class="header-anchor" href="#_6-3-2-核心特点" aria-label="Permalink to &quot;6.3.2 核心特点&quot;">​</a></h4><ol><li>浏览器地址栏路径<strong>发生变化</strong>（显示目标资源路径）</li><li>可重定向到<strong>任意资源</strong>（当前服务器内部或外部网站，如 <code>https://www.baidu.com</code>）</li><li>本质是<strong>两次请求</strong>（第一次请求的 request 和 response 对象被销毁，第二次请求是新的对象）</li><li>不能通过 Request 域传递数据（两次请求是独立的）</li></ol><h3 id="_6-4-路径问题总结" tabindex="-1">6.4 路径问题总结 <a class="header-anchor" href="#_6-4-路径问题总结" aria-label="Permalink to &quot;6.4 路径问题总结&quot;">​</a></h3><p>在 Servlet 开发中，路径是否需要包含虚拟目录（项目部署名），取决于使用场景：</p><table tabindex="0"><thead><tr><th>使用场景</th><th>是否需要虚拟目录</th><th>示例</th></tr></thead><tbody><tr><td>浏览器端跳转（重定向 <code>sendRedirect()</code>）</td><td>是（客户端需知道完整路径）</td><td><code>resp.sendRedirect(&quot;/web-demo/target&quot;)</code></td></tr><tr><td>服务器端跳转（请求转发 <code>forward()</code>）</td><td>否（服务器内部资源，无需虚拟目录）</td><td><code>req.getRequestDispatcher(&quot;/target&quot;)</code></td></tr><tr><td>HTML 中的路径（如 <code>&lt;a&gt;</code>、<code>&lt;form&gt;</code>）</td><td>是（客户端发起请求）</td><td><code>&lt;a href=&quot;/web-demo/demo&quot;&gt;跳转&lt;/a&gt;</code></td></tr></tbody></table><p>优化方案：可通过 <code>req.getContextPath()</code> 获取虚拟目录，避免硬编码：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String contextPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> req.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// /web-demo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sendRedirect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(contextPath </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 动态拼接虚拟目录</span></span></code></pre></div><h2 id="七、servlet-核心区别与对比" tabindex="-1">七、Servlet 核心区别与对比 <a class="header-anchor" href="#七、servlet-核心区别与对比" aria-label="Permalink to &quot;七、Servlet 核心区别与对比&quot;">​</a></h2><h3 id="_7-1-请求转发-vs-重定向" tabindex="-1">7.1 请求转发 vs 重定向 <a class="header-anchor" href="#_7-1-请求转发-vs-重定向" aria-label="Permalink to &quot;7.1 请求转发 vs 重定向&quot;">​</a></h3><table tabindex="0"><thead><tr><th>对比维度</th><th>请求转发（forward）</th><th>重定向（redirect）</th></tr></thead><tbody><tr><td>地址栏路径</td><td>不变</td><td>改变</td></tr><tr><td>请求次数</td><td>1 次</td><td>2 次</td></tr><tr><td>数据共享</td><td>可通过 Request 域共享</td><td>不可共享（两次独立请求）</td></tr><tr><td>跳转范围</td><td>仅当前服务器内部</td><td>任意资源（内部/外部）</td></tr><tr><td>路径要求</td><td>无需虚拟目录</td><td>需包含虚拟目录</td></tr></tbody></table><h3 id="_7-2-doget-vs-dopost" tabindex="-1">7.2 doGet() vs doPost() <a class="header-anchor" href="#_7-2-doget-vs-dopost" aria-label="Permalink to &quot;7.2 doGet() vs doPost()&quot;">​</a></h3><table tabindex="0"><thead><tr><th>对比维度</th><th>doGet()</th><th>doPost()</th></tr></thead><tbody><tr><td>请求参数位置</td><td>URL 查询字符串</td><td>请求体</td></tr><tr><td>参数长度限制</td><td>有限制（取决于浏览器和服务器）</td><td>无限制</td></tr><tr><td>安全性</td><td>低（参数明文显示在 URL 中）</td><td>高（参数在请求体中，需加密可进一步提升）</td></tr><tr><td>适用场景</td><td>查询数据（如搜索、列表查询）</td><td>提交数据（如表单提交、文件上传、登录）</td></tr></tbody></table><h2 id="八、常见问题与注意事项" tabindex="-1">八、常见问题与注意事项 <a class="header-anchor" href="#八、常见问题与注意事项" aria-label="Permalink to &quot;八、常见问题与注意事项&quot;">​</a></h2><ol><li><strong>Servlet 单例多线程安全问题</strong>： <ol><li>问题：多个请求并发调用 <code>service()</code> 方法，若 Servlet 类中有成员变量，会导致线程安全问题</li><li>解决方案：避免在 Servlet 中定义成员变量，使用局部变量（每个线程独立）或线程安全的对象（如 <code>ThreadLocal</code>）</li></ol></li><li><strong>流关闭问题</strong>： <ol><li>Response 的 <code>PrintWriter</code> 和 <code>ServletOutputStream</code> 无需手动关闭，服务器响应结束后会自动关闭</li><li>若手动关闭，可能导致后续响应数据无法输出</li></ol></li><li><strong>404 错误排查</strong>： <ol><li>检查访问路径是否正确（是否包含虚拟目录、路径拼写错误）</li><li>检查 Servlet 类是否添加 <code>@WebServlet</code> 注解或 XML 配置是否正确</li><li>检查项目是否已部署到 Tomcat 且启动成功</li></ol></li><li><strong>500 错误排查</strong>： <ol><li>查看 Tomcat 日志（<code>logs/catalina.out</code>），定位代码异常位置</li><li>常见原因：空指针异常、类找不到异常、数据库连接异常等</li></ol></li><li><strong>静态资源无法访问</strong>： <ol><li>检查 Servlet 路径是否配置为 <code>/</code>（覆盖了 DefaultServlet）</li><li>解决方案：修改 Servlet 路径为精确匹配或目录匹配，避免使用 <code>/</code></li></ol></li></ol></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><!----></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/markdown-examples.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Markdown Examples</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"BM0ndPae\",\"notes_core_一些个人理解.md\":\"BTGEMZ9h\",\"notes_core_中间件部分_docker.md\":\"Q9yhjP8H\",\"notes_core_中间件部分_rabbitmq.md\":\"CKiMHfM-\",\"notes_core_中间件部分_redis.md\":\"BBZKli9p\",\"notes_core_其他_android.md\":\"BMxOwNgT\",\"notes_core_其他_cmake.md\":\"Bzu1OuFP\",\"notes_core_其他_git.md\":\"ChiHvMdH\",\"notes_core_其他_java23种设计模式.md\":\"Cy7HyeEF\",\"notes_core_其他_javavirtualmachine.md\":\"CosUbXrO\",\"notes_core_其他_linux.md\":\"DH8JJuW5\",\"notes_core_其他_qt.md\":\"DWxEDS0u\",\"notes_core_其他_区块链.md\":\"DIsp4API\",\"notes_core_其他_小程序.md\":\"C-EjWNd1\",\"notes_core_其他_网络部分.md\":\"CKym3K81\",\"notes_core_其他_鸿蒙.md\":\"Bi7D1ylf\",\"notes_core_前端总结.md\":\"BXa_WZ6W\",\"notes_core_前端部分_css.md\":\"dUGbcxWR\",\"notes_core_前端部分_html5.md\":\"CaLHY3Sx\",\"notes_core_前端部分_javascript.md\":\"CN-rKMAI\",\"notes_core_前端部分_nodejs.md\":\"BO-iZqs8\",\"notes_core_前端部分_pinia和vuex.md\":\"DOTXcina\",\"notes_core_前端部分_react18.md\":\"DIpOKzX9\",\"notes_core_前端部分_rocketmq.md\":\"B6ug1Eu0\",\"notes_core_前端部分_typescript.md\":\"39VhBUnL\",\"notes_core_前端部分_vue.md\":\"B5zDf1ey\",\"notes_core_前端部分_移动web开发.md\":\"Cwv4wzYT\",\"notes_core_后端总结.md\":\"CnIfst1P\",\"notes_core_后端部分_mongodb.md\":\"hOkiUSJR\",\"notes_core_后端部分_mysql.md\":\"Cq9Rkt8o\",\"notes_core_后端部分_nginx.md\":\"C-4T2z8B\",\"notes_core_后端部分_spring框架_springboot.md\":\"zFN1s-ki\",\"notes_core_后端部分_spring框架_springcloud.md\":\"CEMFdr8u\",\"notes_core_后端部分_spring框架_springframe.md\":\"DIlc0h2B\",\"notes_core_后端部分_spring框架_springmvc.md\":\"DvSjfjT-\",\"notes_core_后端部分_spring框架_springsecurity.md\":\"DUGNnkfk\",\"notes_core_术语解释.md\":\"DpwO1iKU\",\"notes_core_杂七杂八的技术们_爬虫.md\":\"D4ke0dNn\",\"notes_core_架构部分_ajax.md\":\"DGzlzSJh\",\"notes_core_架构部分_jdbc.md\":\"DojjS4iE\",\"notes_core_架构部分_jsp.md\":\"BXZpvtKN\",\"notes_core_架构部分_kubernetes.md\":\"Dc9dcn_c\",\"notes_core_架构部分_mabits-plus.md\":\"CxefDgo2\",\"notes_core_架构部分_maven.md\":\"BD2H2Xiw\",\"notes_core_架构部分_mybatis.md\":\"DMLrzCQ5\",\"notes_core_架构部分_servlet.md\":\"BFaqCxEs\",\"notes_core_架构部分_tomcat.md\":\"Du14ZRs7\",\"notes_core_架构部分_vite.md\":\"DBFWUvv_\",\"notes_core_架构部分_webpack.md\":\"0PfLfPTe\",\"notes_core_架构部分_web与后端的架构问题.md\":\"Cl_y-d1c\",\"notes_core_架构部分_zookeeper.md\":\"xJDx6Os9\",\"notes_core_硬件部分_fpga.md\":\"Bj6Hz8Zl\",\"notes_core_硬件部分_stm32.md\":\"DXYypsdA\",\"notes_core_计算机牛马生存准则.md\":\"h2i8J5Uc\",\"notes_core_语言部分_c.md\":\"D9d7L1MX\",\"notes_core_语言部分_c__.md\":\"D7xhdsu7\",\"notes_core_语言部分_go.md\":\"Bvk6VP8X\",\"notes_core_语言部分_java.md\":\"D0dNFfxj\",\"notes_core_语言部分_kotlin.md\":\"CN5FNXAb\",\"notes_core_语言部分_python.md\":\"x41YKC5V\",\"notes_core_语言部分_rust.md\":\"Ovh7FQMF\",\"教程.md\":\"BFL9JbPa\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"godspead的全栈文档\",\"description\":\"记录我学过的一切\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"palette\":[{\"media\":\"(prefers-color-scheme: dark)\",\"colors\":{\"background\":\"#000000\",\"foreground\":\"#ffffff\",\"primary\":\"#ffffff\",\"secondary\":\"#666666\"}}],\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"前端\",\"items\":[{\"text\":\"JavaScript\",\"link\":\"/notes/frontend/js\"},{\"text\":\"Vue\",\"link\":\"/notes/frontend/vue\"},{\"text\":\"CSS\",\"link\":\"/notes/frontend/css\"}]}],\"sidebar\":[{\"text\":\"Examples\",\"collapsible\":true,\"items\":[{\"text\":\"Markdown Examples\",\"link\":\"/markdown-examples\"},{\"text\":\"Runtime API Examples\",\"link\":\"/api-examples\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>