import{_ as e,c as l,o as a,ae as d}from"./chunks/framework.BR0IJ75L.js";const y=JSON.parse('{"title":"MySQL全面学习文档","description":"","frontmatter":{},"headers":[],"relativePath":"notes_core/后端部分/MySQL.md","filePath":"notes_core/后端部分/MySQL.md"}'),i={name:"notes_core/后端部分/MySQL.md"};function o(r,t,n,s,c,h){return a(),l("div",null,[...t[0]||(t[0]=[d('<h1 id="mysql全面学习文档" tabindex="-1">MySQL全面学习文档 <a class="header-anchor" href="#mysql全面学习文档" aria-label="Permalink to &quot;MySQL全面学习文档&quot;">​</a></h1><h1 id="一、mysql服务基础操作" tabindex="-1">一、MySQL服务基础操作 <a class="header-anchor" href="#一、mysql服务基础操作" aria-label="Permalink to &quot;一、MySQL服务基础操作&quot;">​</a></h1><h2 id="_1-1-服务启动与停止" tabindex="-1">1.1 服务启动与停止 <a class="header-anchor" href="#_1-1-服务启动与停止" aria-label="Permalink to &quot;1.1 服务启动与停止&quot;">​</a></h2><ul><li>启动命令：<code>net start mysql80</code>（mysql80为服务名，需根据实际配置调整）</li><li>停止命令：<code>net stop mysql80</code></li></ul><h2 id="_1-2-客户端连接" tabindex="-1">1.2 客户端连接 <a class="header-anchor" href="#_1-2-客户端连接" aria-label="Permalink to &quot;1.2 客户端连接&quot;">​</a></h2><p>基础连接命令：<code>mysql [-h 127.0.0.1] [-P 3306] -u root -p</code></p><ul><li><code>-h</code>：指定数据库主机地址，默认127.0.0.1（本地）</li><li><code>-P</code>：指定端口号，默认3306（注意大写）</li><li><code>-u</code>：指定用户名，如root</li><li><code>-p</code>：提示输入密码，避免直接在命令行明文写密码</li></ul><h2 id="_1-3-数据类型参考" tabindex="-1">1.3 数据类型参考 <a class="header-anchor" href="#_1-3-数据类型参考" aria-label="Permalink to &quot;1.3 数据类型参考&quot;">​</a></h2><p>详细数据类型讲解视频：<a href="https://www.bilibili.com/video/BV1Kr4y1i7ru?t=594.0&amp;p=8" target="_blank" rel="noreferrer">MySQL数据类型详解</a></p><h1 id="二、mysql核心语言-ddl-dml-dql-dcl" tabindex="-1">二、MySQL核心语言（DDL/DML/DQL/DCL） <a class="header-anchor" href="#二、mysql核心语言-ddl-dml-dql-dcl" aria-label="Permalink to &quot;二、MySQL核心语言（DDL/DML/DQL/DCL）&quot;">​</a></h1><h2 id="_2-1-数据定义语言-ddl" tabindex="-1">2.1 数据定义语言（DDL） <a class="header-anchor" href="#_2-1-数据定义语言-ddl" aria-label="Permalink to &quot;2.1 数据定义语言（DDL）&quot;">​</a></h2><p>用于定义数据库、表结构，核心操作包括创建、查询、修改、删除</p><h3 id="_2-1-1-数据库操作" tabindex="-1">2.1.1 数据库操作 <a class="header-anchor" href="#_2-1-1-数据库操作" aria-label="Permalink to &quot;2.1.1 数据库操作&quot;">​</a></h3><ul><li>查询所有数据库：<code>show databases;</code></li><li>查询当前使用的数据库：<code>select database();</code></li><li>创建数据库：<code>create database [if not exists] db_name [charset utf8mb4];</code>（if not exists避免重复创建错误，utf8mb4支持emoji）</li><li>删除数据库：<code>drop database db_name;</code>（谨慎操作，数据不可恢复）</li><li>使用数据库：<code>use db_name;</code>（操作表前必须指定数据库）</li></ul><h3 id="_2-1-2-表结构操作" tabindex="-1">2.1.2 表结构操作 <a class="header-anchor" href="#_2-1-2-表结构操作" aria-label="Permalink to &quot;2.1.2 表结构操作&quot;">​</a></h3><ul><li>查询当前数据库所有表：<code>show tables;</code></li><li>查询表结构：<code>desc table_name;</code></li><li>查询指定表的建表语句：<code>show create table table_name;</code>（查看完整表定义，包括引擎、字符集）</li><li>创建表：<code>create table table_name(字段1 字段1类型 约束, 字段2 字段2类型 约束, ...);</code></li><li>修改表-添加字段：<code>alter table table_name add 字段名 字段类型 约束;</code></li><li>修改表-修改数据类型：<code>alter table table_name modify 字段名 字段类型;</code></li><li>修改表-修改字段名：<code>alter table table_name change 旧字段名 新字段名 字段类型;</code></li><li>修改表-删除字段：<code>alter table table_name drop 字段名;</code></li><li>修改表-修改表名：<code>alter table table_name rename to 新表名;</code></li><li>删除表：<code>drop table table_name;</code></li></ul><h2 id="_2-2-数据操作语言-dml" tabindex="-1">2.2 数据操作语言（DML） <a class="header-anchor" href="#_2-2-数据操作语言-dml" aria-label="Permalink to &quot;2.2 数据操作语言（DML）&quot;">​</a></h2><p>用于对表中数据进行增删改操作</p><h3 id="_2-2-1-插入数据" tabindex="-1">2.2.1 插入数据 <a class="header-anchor" href="#_2-2-1-插入数据" aria-label="Permalink to &quot;2.2.1 插入数据&quot;">​</a></h3><ul><li>指定字段添加：<code>insert into table_name(字段1, 字段2, ...) values(值1, 值2, ...);</code></li><li>全部字段添加：<code>insert into table_name values(值1, 值2, ...);</code>（需按字段顺序传入所有值）</li><li>批量添加：<code>insert into table_name values(值1,值2...),(值1,值2...),(值1,值2...);</code>（效率高于多次单条插入）</li><li>注意：字符串和日期类型值需用单引号包裹，如<code>&#39;2024-05-20&#39;</code>、<code>&#39;张三&#39;</code></li></ul><h3 id="_2-2-2-修改数据" tabindex="-1">2.2.2 修改数据 <a class="header-anchor" href="#_2-2-2-修改数据" aria-label="Permalink to &quot;2.2.2 修改数据&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>update table_name set 字段1=值1, 字段2=值2... where 条件;</span></span></code></pre></div><p>必须加where条件，否则会修改表中所有数据！</p><h3 id="_2-2-3-删除数据" tabindex="-1">2.2.3 删除数据 <a class="header-anchor" href="#_2-2-3-删除数据" aria-label="Permalink to &quot;2.2.3 删除数据&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>delete from table_name where 删除条件;</span></span></code></pre></div><p>where条件不可省略，否则删除全表数据；delete删除的记录可通过事务回滚恢复，truncate（DDL）不可恢复</p><h2 id="_2-3-数据查询语言-dql" tabindex="-1">2.3 数据查询语言（DQL） <a class="header-anchor" href="#_2-3-数据查询语言-dql" aria-label="Permalink to &quot;2.3 数据查询语言（DQL）&quot;">​</a></h2><p>核心语法：<code>select 字段列表 from 表名 where 查询条件 group by 分组字段 having 分组条件 order by 排序字段 limit 分页参数</code></p><p>执行顺序：1.where → 2.group by → 3.having → 4.select → 5.order by → 6.limit</p><h3 id="_2-3-1-基本查询" tabindex="-1">2.3.1 基本查询 <a class="header-anchor" href="#_2-3-1-基本查询" aria-label="Permalink to &quot;2.3.1 基本查询&quot;">​</a></h3><ul><li>查询多个字段：<code>select 字段1, 字段2... from table_name;</code></li><li>查询所有字段：<code>select * from table_name;</code>（开发中尽量避免用*，明确字段更高效）</li><li>设置别名：<code>select 字段1 as 别名1, 字段2 别名2... from table_name;</code>（as可省略，别名含空格需用双引号）</li><li>去除重复记录：<code>select distinct 字段1, 字段2... from table_name;</code>（多字段时需同时重复才会去重）</li></ul><h3 id="_2-3-2-条件查询-where" tabindex="-1">2.3.2 条件查询（where） <a class="header-anchor" href="#_2-3-2-条件查询-where" aria-label="Permalink to &quot;2.3.2 条件查询（where）&quot;">​</a></h3><p>基础语法：<code>select 字段列表 from table_name where 条件1 and/or 条件2...</code></p><p>常用条件符号：</p><table tabindex="0"><thead><tr><th style="text-align:left;">符号/关键字</th><th style="text-align:left;">含义</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><code>&lt;&gt;</code> 或 <code>!=</code></td><td style="text-align:left;">不等于</td><td style="text-align:left;">age &lt;&gt; 18</td></tr><tr><td style="text-align:left;"><code>is NULL</code></td><td style="text-align:left;">为空（不能用=NULL）</td><td style="text-align:left;">name is NULL</td></tr><tr><td style="text-align:left;"><code>is not NULL</code></td><td style="text-align:left;">不为空</td><td style="text-align:left;">name is not NULL</td></tr><tr><td style="text-align:left;"><code>between A and B</code></td><td style="text-align:left;">在A到B范围内（含边界）</td><td style="text-align:left;">age between 18 and 30</td></tr><tr><td style="text-align:left;"><code>in(A,B,C)</code></td><td style="text-align:left;">在指定集合中</td><td style="text-align:left;">gender in(&#39;男&#39;,&#39;女&#39;)</td></tr><tr><td style="text-align:left;"><code>LIKE</code></td><td style="text-align:left;">模糊匹配</td><td style="text-align:left;">name LIKE &#39;%张%&#39;</td></tr></tbody></table><h4 id="模糊匹配详解" tabindex="-1">模糊匹配详解 <a class="header-anchor" href="#模糊匹配详解" aria-label="Permalink to &quot;模糊匹配详解&quot;">​</a></h4><p>MySQL支持通配符、内置函数、正则表达式三种模糊匹配方式：</p><ol><li><strong>通配符匹配</strong>：%（任意数量字符，包括0个）、_（单个字符） 匹配含&quot;网&quot;字：<code>SELECT * FROM app_info WHERE appName LIKE &#39;%网%&#39;;</code></li><li>匹配以&quot;网&quot;结尾：<code>SELECT * FROM app_info WHERE appName LIKE &#39;%网&#39;;</code></li><li>匹配以&quot;网&quot;开头：<code>SELECT * FROM app_info WHERE appName LIKE &#39;网%&#39;;</code></li><li>匹配3字符且以&quot;网&quot;结尾：<code>SELECT * FROM app_info WHERE appName LIKE &#39;__网&#39;;</code></li><li><strong>内置函数匹配</strong>：返回子串位置，&gt;0表示存在 LOCATE：<code>SELECT * FROM app_info WHERE LOCATE(&#39;网&#39;, appName) &gt; 0;</code></li><li>POSITION：<code>SELECT * FROM app_info WHERE POSITION(&#39;网&#39; IN appName) &gt; 0;</code></li><li>INSTR：<code>SELECT * FROM app_info WHERE INSTR(appName, &#39;网&#39;) &gt; 0;</code></li><li><strong>正则表达式匹配（REGEXP）</strong>：支持复杂模式 包含指定字符：<code>SELECT * FROM app_info WHERE appName REGEXP &#39;网&#39;;</code></li><li>多条件匹配：<code>SELECT * FROM app_info WHERE appName REGEXP &#39;中国|互联网|大学&#39;;</code></li><li>数字开头：<code>SELECT * FROM app_info WHERE appName REGEXP &#39;^[0-9]&#39;;</code></li></ol><p>模糊匹配注意：%开头会导致索引失效，影响性能；数据含通配符需用ESCAPE转义；默认不区分大小写</p><h3 id="_2-3-3-聚合查询" tabindex="-1">2.3.3 聚合查询 <a class="header-anchor" href="#_2-3-3-聚合查询" aria-label="Permalink to &quot;2.3.3 聚合查询&quot;">​</a></h3><p>使用聚合函数对数据进行统计，常用函数：count（计数）、sum（求和）、avg（平均值）、max（最大值）、min（最小值）</p><ul><li>统计总记录数：<code>select count(*) from user;</code>（count(*)包含NULL，count(字段)不包含NULL）</li><li>按条件统计：<code>select count(age) from user where age &gt; 18;</code>（统计年龄大于18的记录数）</li></ul><h3 id="_2-3-4-分组查询-group-by" tabindex="-1">2.3.4 分组查询（group by） <a class="header-anchor" href="#_2-3-4-分组查询-group-by" aria-label="Permalink to &quot;2.3.4 分组查询（group by）&quot;">​</a></h3><p>将数据按指定字段分组，结合聚合函数使用</p><ul><li>基础用法：<code>select 分组字段, count(*) from user group by 分组字段;</code></li><li>示例：按年龄分组统计人数：<code>select age, count(*) from user group by age;</code></li><li>分组筛选（having）：<code>select age, count(*) from user group by age having count(*) &gt; 5;</code>（筛选分组后人数大于5的组）</li><li>区别：where筛选原始数据（分组前），having筛选分组结果（分组后）</li></ul><h3 id="_2-3-5-排序查询-order-by" tabindex="-1">2.3.5 排序查询（order by） <a class="header-anchor" href="#_2-3-5-排序查询-order-by" aria-label="Permalink to &quot;2.3.5 排序查询（order by）&quot;">​</a></h3><p>按指定字段排序，默认升序（asc），可指定降序（desc）</p><ul><li>单字段升序：<code>select * from user order by age asc;</code>（asc可省略）</li><li>单字段降序：<code>select * from user order by age desc;</code></li><li>多字段排序：<code>select * from user order by age desc, id asc;</code>（先按年龄降序，年龄相同按id升序）</li></ul><h3 id="_2-3-6-分页查询-limit" tabindex="-1">2.3.6 分页查询（limit） <a class="header-anchor" href="#_2-3-6-分页查询-limit" aria-label="Permalink to &quot;2.3.6 分页查询（limit）&quot;">​</a></h3><p>用于实现分页功能，语法：<code>limit 起始索引, 查询记录数</code></p><ul><li>起始索引计算：<code>起始索引 = (查询页码 - 1) * 每页显示记录数</code></li><li>示例：第2页，每页显示10条：<code>select * from user limit 10, 10;</code>（索引从0开始，第1页为limit 0,10）</li></ul><h2 id="_2-4-权限控制语句-dcl" tabindex="-1">2.4 权限控制语句（DCL） <a class="header-anchor" href="#_2-4-权限控制语句-dcl" aria-label="Permalink to &quot;2.4 权限控制语句（DCL）&quot;">​</a></h2><p>用于管理数据库用户和权限分配</p><h3 id="_2-4-1-用户管理" tabindex="-1">2.4.1 用户管理 <a class="header-anchor" href="#_2-4-1-用户管理" aria-label="Permalink to &quot;2.4.1 用户管理&quot;">​</a></h3><ul><li>查询用户：<code>use mysql; select * from user;</code>（用户信息存储在mysql库的user表中）</li><li>创建用户：<code>create user &#39;用户名&#39;@&#39;主机名&#39; identified by &#39;密码&#39;;</code>（主机名%表示任意主机可连接）</li><li>修改用户密码：<code>alter user &#39;用户名&#39;@&#39;主机名&#39; identified with mysql_native_password by &#39;新密码&#39;;</code></li><li>删除用户：<code>drop user &#39;用户名&#39;@&#39;主机名&#39;;</code></li></ul><h3 id="_2-4-2-权限控制" tabindex="-1">2.4.2 权限控制 <a class="header-anchor" href="#_2-4-2-权限控制" aria-label="Permalink to &quot;2.4.2 权限控制&quot;">​</a></h3><p>常用权限：all privileges（所有权限）、select（查询）、insert（插入）、update（修改）、delete（删除）、create（创建）、alter（修改结构）、drop（删除）</p><ul><li>查询权限：<code>show grants for &#39;用户名&#39;@&#39;主机名&#39;;</code></li><li>授予权限：<code>grant 权限 on 数据库.表 to &#39;用户名&#39;@&#39;主机名&#39;;</code>（*.*表示所有数据库所有表）</li><li>示例：授予查询test库所有表权限：<code>grant select on test.* to &#39;testuser&#39;@&#39;%&#39;;</code></li><li>撤销权限：<code>revoke 权限 on 数据库.表 from &#39;用户名&#39;@&#39;主机名&#39;;</code></li></ul><h1 id="三、mysql函数" tabindex="-1">三、MySQL函数 <a class="header-anchor" href="#三、mysql函数" aria-label="Permalink to &quot;三、MySQL函数&quot;">​</a></h1><h2 id="_3-1-字符串函数" tabindex="-1">3.1 字符串函数 <a class="header-anchor" href="#_3-1-字符串函数" aria-label="Permalink to &quot;3.1 字符串函数&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">函数名</th><th style="text-align:left;">功能</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;">concat(str1,str2,...)</td><td style="text-align:left;">字符串拼接</td><td style="text-align:left;">concat(&#39;张&#39;,&#39;三&#39;) → &#39;张三&#39;</td></tr><tr><td style="text-align:left;">lower(str)</td><td style="text-align:left;">转为小写</td><td style="text-align:left;">lower(&#39;MySQL&#39;) → &#39;mysql&#39;</td></tr><tr><td style="text-align:left;">upper(str)</td><td style="text-align:left;">转为大写</td><td style="text-align:left;">upper(&#39;mysql&#39;) → &#39;MYSQL&#39;</td></tr><tr><td style="text-align:left;">lpad(str,n,pad)</td><td style="text-align:left;">左填充至n位，不足用pad补</td><td style="text-align:left;">lpad(&#39;123&#39;,5,&#39;0&#39;) → &#39;00123&#39;</td></tr><tr><td style="text-align:left;">rpad(str,n,pad)</td><td style="text-align:left;">右填充至n位，不足用pad补</td><td style="text-align:left;">rpad(&#39;123&#39;,5,&#39;0&#39;) → &#39;12300&#39;</td></tr><tr><td style="text-align:left;">trim(str)</td><td style="text-align:left;">去除首尾空格</td><td style="text-align:left;">trim(&#39; abc &#39;) → &#39;abc&#39;</td></tr><tr><td style="text-align:left;">substring(str,start,len)</td><td style="text-align:left;">截取字符串，start从1开始</td><td style="text-align:left;">substring(&#39;MySQL&#39;,2,3) → &#39;SQL&#39;</td></tr><tr><td style="text-align:left;">length(str)</td><td style="text-align:left;">获取字符串字节长度</td><td style="text-align:left;">length(&#39;张三&#39;) → 6（utf8mb4下一个中文3字节）</td></tr></tbody></table><h2 id="_3-2-数值函数" tabindex="-1">3.2 数值函数 <a class="header-anchor" href="#_3-2-数值函数" aria-label="Permalink to &quot;3.2 数值函数&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">函数名</th><th style="text-align:left;">功能</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;">ceil(num)</td><td style="text-align:left;">向上取整</td><td style="text-align:left;">ceil(1.2) → 2</td></tr><tr><td style="text-align:left;">floor(num)</td><td style="text-align:left;">向下取整</td><td style="text-align:left;">floor(1.8) → 1</td></tr><tr><td style="text-align:left;">mod(a,b)</td><td style="text-align:left;">取余数（a%b）</td><td style="text-align:left;">mod(5,2) → 1</td></tr><tr><td style="text-align:left;">abs(num)</td><td style="text-align:left;">绝对值</td><td style="text-align:left;">abs(-3) → 3</td></tr><tr><td style="text-align:left;">rand()</td><td style="text-align:left;">返回0~1随机数</td><td style="text-align:left;">rand() → 0.654321</td></tr><tr><td style="text-align:left;">round(num,n)</td><td style="text-align:left;">四舍五入，保留n位小数</td><td style="text-align:left;">round(3.1415,2) → 3.14</td></tr></tbody></table><h2 id="_3-3-日期函数" tabindex="-1">3.3 日期函数 <a class="header-anchor" href="#_3-3-日期函数" aria-label="Permalink to &quot;3.3 日期函数&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">函数名</th><th style="text-align:left;">功能</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;">datediff(date1,date2)</td><td style="text-align:left;">date1 - date2的天数</td><td style="text-align:left;">datediff(&#39;2024-05-20&#39;,&#39;2024-05-10&#39;) → 10</td></tr><tr><td style="text-align:left;">now()</td><td style="text-align:left;">当前日期时间（YYYY-MM-DD HH:MM:SS）</td><td style="text-align:left;">now() → 2024-05-20 15:30:00</td></tr><tr><td style="text-align:left;">date_add(date,interval n type)</td><td style="text-align:left;">日期加n个指定单位</td><td style="text-align:left;">date_add(now(),interval 7 day) → 7天后</td></tr><tr><td style="text-align:left;">date_sub(date,interval n type)</td><td style="text-align:left;">日期减n个指定单位</td><td style="text-align:left;">date_sub(now(),interval 1 month) → 1个月前</td></tr><tr><td style="text-align:left;">date_format(date,format)</td><td style="text-align:left;">日期格式化</td><td style="text-align:left;">date_format(now(),&#39;%Y年%m月%d日&#39;) → 2024年05月20日</td></tr><tr><td style="text-align:left;">curdate()</td><td style="text-align:left;">当前日期（YYYY-MM-DD）</td><td style="text-align:left;">curdate() → 2024-05-20</td></tr><tr><td style="text-align:left;">curtime()</td><td style="text-align:left;">当前时间（HH:MM:SS）</td><td style="text-align:left;">curtime() → 15:30:00</td></tr><tr><td style="text-align:left;">year(date)</td><td style="text-align:left;">提取年份</td><td style="text-align:left;">year(&#39;2024-05-20&#39;) → 2024</td></tr><tr><td style="text-align:left;">month(date)</td><td style="text-align:left;">提取月份</td><td style="text-align:left;">month(&#39;2024-05-20&#39;) → 5</td></tr></tbody></table><h2 id="_3-4-流程函数" tabindex="-1">3.4 流程函数 <a class="header-anchor" href="#_3-4-流程函数" aria-label="Permalink to &quot;3.4 流程函数&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">函数名</th><th style="text-align:left;">功能</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;">if(condition,t,f)</td><td style="text-align:left;">condition为真返回t，否则返回f</td><td style="text-align:left;">if(age&gt;18,&#39;成年&#39;,&#39;未成年&#39;)</td></tr><tr><td style="text-align:left;">ifnull(v1,v2)</td><td style="text-align:left;">v1为NULL返回v2，否则返回v1</td><td style="text-align:left;">ifnull(salary,0) → 薪资为NULL时返回0</td></tr><tr><td style="text-align:left;">case多条件判断1</td><td style="text-align:left;">按条件匹配返回对应值</td><td style="text-align:left;">case when score&gt;=90 then &#39;A&#39; when score&gt;=80 then &#39;B&#39; else &#39;C&#39; end</td></tr><tr><td style="text-align:left;">case多条件判断2</td><td style="text-align:left;">按值匹配返回对应值</td><td style="text-align:left;">case gender when &#39;1&#39; then &#39;男&#39; when &#39;2&#39; then &#39;女&#39; else &#39;未知&#39; end</td></tr></tbody></table><h1 id="四、约束与外键" tabindex="-1">四、约束与外键 <a class="header-anchor" href="#四、约束与外键" aria-label="Permalink to &quot;四、约束与外键&quot;">​</a></h1><h2 id="_4-1-六大约束" tabindex="-1">4.1 六大约束 <a class="header-anchor" href="#_4-1-六大约束" aria-label="Permalink to &quot;4.1 六大约束&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">约束类型</th><th style="text-align:left;">关键字</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:left;">非空约束</td><td style="text-align:left;">not null</td><td style="text-align:left;">字段值不可为NULL</td></tr><tr><td style="text-align:left;">唯一约束</td><td style="text-align:left;">unique</td><td style="text-align:left;">字段值唯一，可存多个NULL</td></tr><tr><td style="text-align:left;">主键约束</td><td style="text-align:left;">primary key</td><td style="text-align:left;">非空+唯一，表中唯一标识（自动增长auto_increment）</td></tr><tr><td style="text-align:left;">默认约束</td><td style="text-align:left;">default</td><td style="text-align:left;">字段未赋值时使用默认值</td></tr><tr><td style="text-align:left;">检查约束</td><td style="text-align:left;">check</td><td style="text-align:left;">限制字段值范围（如check(age&gt;0)）</td></tr><tr><td style="text-align:left;">外键约束</td><td style="text-align:left;">foreign key</td><td style="text-align:left;">关联两张表，保证数据一致性</td></tr></tbody></table><h2 id="_4-2-外键详解" tabindex="-1">4.2 外键详解 <a class="header-anchor" href="#_4-2-外键详解" aria-label="Permalink to &quot;4.2 外键详解&quot;">​</a></h2><p>外键用于关联主表（被参照表）和从表（参照表），从表外键值需在主表主键值范围内或为NULL</p><h3 id="_4-2-1-外键操作语法" tabindex="-1">4.2.1 外键操作语法 <a class="header-anchor" href="#_4-2-1-外键操作语法" aria-label="Permalink to &quot;4.2.1 外键操作语法&quot;">​</a></h3><ul><li>创建表时添加外键：<code>create table 从表名(字段1 类型, 外键字段 类型, constraint 外键名 foreign key (外键字段) references 主表名(主表主键));</code></li><li>已有表添加外键：<code>alter table 从表名 add constraint 外键名 foreign key (外键字段) references 主表名(主表主键);</code></li><li>删除外键：<code>alter table 从表名 drop foreign key 外键名;</code></li></ul><h3 id="_4-2-2-外键行为-主表数据变更时从表处理方式" tabindex="-1">4.2.2 外键行为（主表数据变更时从表处理方式） <a class="header-anchor" href="#_4-2-2-外键行为-主表数据变更时从表处理方式" aria-label="Permalink to &quot;4.2.2 外键行为（主表数据变更时从表处理方式）&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">行为类型</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:left;">no action / restrict</td><td style="text-align:left;">主表数据有对应外键时，禁止删除/修改（默认行为）</td></tr><tr><td style="text-align:left;">cascade</td><td style="text-align:left;">主表数据删除/修改时，从表对应外键数据同步删除/修改</td></tr><tr><td style="text-align:left;">set null</td><td style="text-align:left;">主表数据删除时，从表对应外键数据设为NULL（需外键允许NULL）</td></tr><tr><td style="text-align:left;">set default</td><td style="text-align:left;">主表数据变更时，从表外键设为默认值（需提前设置默认值）</td></tr></tbody></table><p>示例：添加级联删除外键：<code>alter table order add constraint fk_order_user foreign key (user_id) references user(id) on delete cascade;</code></p><h1 id="五、多表查询" tabindex="-1">五、多表查询 <a class="header-anchor" href="#五、多表查询" aria-label="Permalink to &quot;五、多表查询&quot;">​</a></h1><h2 id="_5-1-基础多表查询" tabindex="-1">5.1 基础多表查询 <a class="header-anchor" href="#_5-1-基础多表查询" aria-label="Permalink to &quot;5.1 基础多表查询&quot;">​</a></h2><p>核心：通过外键关联多张表，语法：<code>select * from 表1, 表2 where 表1.外键 = 表2.主键;</code></p><p>示例：查询订单及对应用户信息：<code>select o.id, o.order_no, u.name from order o, user u where o.user_id = u.id;</code></p><h2 id="_5-2-连接查询" tabindex="-1">5.2 连接查询 <a class="header-anchor" href="#_5-2-连接查询" aria-label="Permalink to &quot;5.2 连接查询&quot;">​</a></h2><h3 id="_5-2-1-内连接-inner-join" tabindex="-1">5.2.1 内连接（inner join） <a class="header-anchor" href="#_5-2-1-内连接-inner-join" aria-label="Permalink to &quot;5.2.1 内连接（inner join）&quot;">​</a></h3><p>查询两张表的交集部分（匹配上的记录）</p><ul><li>隐式内连接：<code>select * from 表1, 表2 where 关联条件;</code>（即基础多表查询）</li><li>显式内连接：<code>select * from 表1 inner join 表2 on 关联条件;</code>（推荐，逻辑更清晰）</li></ul><h3 id="_5-2-2-外连接" tabindex="-1">5.2.2 外连接 <a class="header-anchor" href="#_5-2-2-外连接" aria-label="Permalink to &quot;5.2.2 外连接&quot;">​</a></h3><ul><li>左外连接（left join）：查询左表所有记录 + 右表匹配记录，右表无匹配则为NULL 语法：<code>select * from 左表 left join 右表 on 关联条件;</code></li><li>右外连接（right join）：查询右表所有记录 + 左表匹配记录，左表无匹配则为NULL 语法：<code>select * from 左表 right join 右表 on 关联条件;</code></li></ul><h3 id="_5-2-3-自连接" tabindex="-1">5.2.3 自连接 <a class="header-anchor" href="#_5-2-3-自连接" aria-label="Permalink to &quot;5.2.3 自连接&quot;">​</a></h3><p>同一张表当作两张表查询，需给表取别名</p><p>示例：查询员工及直属领导信息：<code>select e.name 员工, l.name 领导 from emp e left join emp l on e.leader_id = l.id;</code></p><h3 id="_5-2-4-联合查询-union" tabindex="-1">5.2.4 联合查询（union） <a class="header-anchor" href="#_5-2-4-联合查询-union" aria-label="Permalink to &quot;5.2.4 联合查询（union）&quot;">​</a></h3><p>合并多张表的查询结果，要求字段数和类型一致，会自动去重（union all不去重）</p><p>语法：<code>select 字段列表 from 表1 union select 字段列表 from 表2;</code></p><h3 id="_5-2-5-子查询" tabindex="-1">5.2.5 子查询 <a class="header-anchor" href="#_5-2-5-子查询" aria-label="Permalink to &quot;5.2.5 子查询&quot;">​</a></h3><p>一个查询语句作为另一个查询的条件或字段，按返回结果分为四类：</p><ul><li>标量子查询：返回单个值（用于=、&gt;、&lt;等条件） 示例：查询薪资最高的员工：<code>select * from emp where salary = (select max(salary) from emp);</code></li><li>列子查询：返回单列多行（用于in、not in等条件） 示例：查询部门编号为1、2的员工：<code>select * from emp where dept_id in (select id from dept where id in (1,2));</code></li><li>行子查询：返回单行多列（用于多字段匹配） 示例：查询与张三薪资和部门相同的员工：<code>select * from emp where (salary, dept_id) = (select salary, dept_id from emp where name=&#39;张三&#39;);</code></li><li>表子查询：返回多行多列（用于from子句，当作临时表） 示例：查询各部门薪资前2的员工：<code>select * from (select *, rank() over(partition by dept_id order by salary desc) rk from emp) t where rk &lt;=2;</code></li></ul><h1 id="六、事务" tabindex="-1">六、事务 <a class="header-anchor" href="#六、事务" aria-label="Permalink to &quot;六、事务&quot;">​</a></h1><h2 id="_6-1-事务的acid特性" tabindex="-1">6.1 事务的ACID特性 <a class="header-anchor" href="#_6-1-事务的acid特性" aria-label="Permalink to &quot;6.1 事务的ACID特性&quot;">​</a></h2><ul><li><strong>原子性（Atomicity）</strong>：事务中所有操作要么全成功，要么全失败（回滚）</li><li><strong>一致性（Consistency）</strong>：事务执行前后数据库数据完整性不变（如转账前后总金额不变）</li><li><strong>隔离性（Isolation）</strong>：多个事务并发执行时，相互不干扰</li><li><strong>持久性（Durability）</strong>：事务提交后，数据永久保存到磁盘</li></ul><h2 id="_6-2-事务操作语法" tabindex="-1">6.2 事务操作语法 <a class="header-anchor" href="#_6-2-事务操作语法" aria-label="Permalink to &quot;6.2 事务操作语法&quot;">​</a></h2><ul><li>查看事务提交方式：<code>select @@autocommit;</code>（1：自动提交，0：手动提交）</li><li>设置手动提交：<code>set @@autocommit = 0;</code></li><li>开启事务：<code>begin;</code> 或 <code>start transaction;</code></li><li>提交事务：<code>commit;</code>（事务成功时执行，数据写入磁盘）</li><li>回滚事务：<code>rollback;</code>（事务失败时执行，恢复到事务前状态）</li></ul><h2 id="_6-3-并发事务问题与隔离级别" tabindex="-1">6.3 并发事务问题与隔离级别 <a class="header-anchor" href="#_6-3-并发事务问题与隔离级别" aria-label="Permalink to &quot;6.3 并发事务问题与隔离级别&quot;">​</a></h2><h3 id="_6-3-1-并发事务三大问题" tabindex="-1">6.3.1 并发事务三大问题 <a class="header-anchor" href="#_6-3-1-并发事务三大问题" aria-label="Permalink to &quot;6.3.1 并发事务三大问题&quot;">​</a></h3><ul><li>脏读：一个事务读取到另一个事务未提交的修改数据</li><li>不可重复读：同一事务内，多次读取同一数据结果不一致（另一事务提交了修改）</li><li>幻读：同一事务内，多次查询同一条件，结果集行数不一致（另一事务提交了插入/删除）</li></ul><h3 id="_6-3-2-事务隔离级别-从低到高" tabindex="-1">6.3.2 事务隔离级别（从低到高） <a class="header-anchor" href="#_6-3-2-事务隔离级别-从低到高" aria-label="Permalink to &quot;6.3.2 事务隔离级别（从低到高）&quot;">​</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">隔离级别</th><th style="text-align:left;">关键字</th><th style="text-align:left;">解决问题</th><th style="text-align:left;">MySQL默认</th></tr></thead><tbody><tr><td style="text-align:left;">读未提交</td><td style="text-align:left;">read uncommitted</td><td style="text-align:left;">无</td><td style="text-align:left;">否</td></tr><tr><td style="text-align:left;">读已提交</td><td style="text-align:left;">read committed</td><td style="text-align:left;">脏读</td><td style="text-align:left;">否</td></tr><tr><td style="text-align:left;">可重复读</td><td style="text-align:left;">repeatable read</td><td style="text-align:left;">脏读、不可重复读</td><td style="text-align:left;">是</td></tr><tr><td style="text-align:left;">串行化</td><td style="text-align:left;">serializable</td><td style="text-align:left;">所有问题（并发最低）</td><td style="text-align:left;">否</td></tr></tbody></table><p>操作语法：</p><ul><li>查看隔离级别：<code>select @@transaction_isolation;</code></li><li>设置隔离级别：<code>set [session | global] transaction isolation level 隔离级别;</code></li></ul><h1 id="七、存储引擎" tabindex="-1">七、存储引擎 <a class="header-anchor" href="#七、存储引擎" aria-label="Permalink to &quot;七、存储引擎&quot;">​</a></h1><h2 id="_7-1-常用存储引擎" tabindex="-1">7.1 常用存储引擎 <a class="header-anchor" href="#_7-1-常用存储引擎" aria-label="Permalink to &quot;7.1 常用存储引擎&quot;">​</a></h2><p>MySQL支持多种存储引擎，通过<code>engine = 引擎名</code>指定，默认InnoDB</p><table tabindex="0"><thead><tr><th style="text-align:left;">存储引擎</th><th style="text-align:left;">特点</th><th style="text-align:left;">适用场景</th></tr></thead><tbody><tr><td style="text-align:left;">InnoDB</td><td style="text-align:left;">支持事务、行级锁、外键，数据文件.ibd，崩溃恢复能力强</td><td style="text-align:left;">绝大多数业务场景（电商、金融等）</td></tr><tr><td style="text-align:left;">MyISAM</td><td style="text-align:left;">不支持事务和外键，表级锁，查询速度快，数据文件.myd+.myi</td><td style="text-align:left;">只读或读写少的场景（日志、报表）</td></tr><tr><td style="text-align:left;">Memory</td><td style="text-align:left;">数据存内存，速度极快，重启数据丢失</td><td style="text-align:left;">临时数据存储（缓存）</td></tr></tbody></table><p>InnoDB重要参数：<code>innodb_file_per_table=1</code>（1：每张表一个ibd文件；0：所有表共享表空间）</p><h1 id="八、索引" tabindex="-1">八、索引 <a class="header-anchor" href="#八、索引" aria-label="Permalink to &quot;八、索引&quot;">​</a></h1><h2 id="_8-1-索引类型" tabindex="-1">8.1 索引类型 <a class="header-anchor" href="#_8-1-索引类型" aria-label="Permalink to &quot;8.1 索引类型&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">索引类型</th><th style="text-align:left;">关键字</th><th style="text-align:left;">功能</th></tr></thead><tbody><tr><td style="text-align:left;">主键索引</td><td style="text-align:left;">primary key</td><td style="text-align:left;">基于主键创建，唯一且非空</td></tr><tr><td style="text-align:left;">唯一索引</td><td style="text-align:left;">unique</td><td style="text-align:left;">字段值唯一，可存NULL</td></tr><tr><td style="text-align:left;">常规索引</td><td style="text-align:left;">index</td><td style="text-align:left;">加速普通查询，无唯一性约束</td></tr><tr><td style="text-align:left;">全文索引</td><td style="text-align:left;">fulltext</td><td style="text-align:left;">用于长文本关键词检索（InnoDB 5.6+支持）</td></tr></tbody></table><h2 id="_8-2-innodb索引结构" tabindex="-1">8.2 InnoDB索引结构 <a class="header-anchor" href="#_8-2-innodb索引结构" aria-label="Permalink to &quot;8.2 InnoDB索引结构&quot;">​</a></h2><ul><li><strong>聚集索引</strong>：数据与索引存储在一起，叶子节点存完整行数据，表中唯一，默认是主键索引；无主键则用第一个唯一索引；无唯一索引则自动生成rowid作为聚集索引。</li><li><strong>二级索引</strong>：数据与索引分离，叶子节点存对应主键值，需通过主键值回表查询完整数据（回表：先查二级索引得主键，再查聚集索引得数据）。</li></ul><h2 id="_8-3-索引操作语法" tabindex="-1">8.3 索引操作语法 <a class="header-anchor" href="#_8-3-索引操作语法" aria-label="Permalink to &quot;8.3 索引操作语法&quot;">​</a></h2><ul><li>创建索引：<code>create [unique|fulltext] index 索引名 on 表名(字段1, 字段2...);</code>（多字段为联合索引）</li><li>查看索引：<code>show index from 表名;</code></li></ul>',120)])])}const g=e(i,[["render",o]]);export{y as __pageData,g as default};
