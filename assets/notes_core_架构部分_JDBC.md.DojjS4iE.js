import{_ as i,c as a,o as n,ae as t}from"./chunks/framework.BR0IJ75L.js";const o=JSON.parse('{"title":"JDBC 详解","description":"","frontmatter":{},"headers":[],"relativePath":"notes_core/架构部分/JDBC.md","filePath":"notes_core/架构部分/JDBC.md"}'),e={name:"notes_core/架构部分/JDBC.md"};function l(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="jdbc-详解" tabindex="-1">JDBC 详解 <a class="header-anchor" href="#jdbc-详解" aria-label="Permalink to &quot;JDBC 详解&quot;">​</a></h1><h1 id="jdbc-详解-java-数据库连接" tabindex="-1">JDBC 详解（Java 数据库连接） <a class="header-anchor" href="#jdbc-详解-java-数据库连接" aria-label="Permalink to &quot;JDBC 详解（Java 数据库连接）&quot;">​</a></h1><p>JDBC（Java Database Connectivity）是 Java 语言中用于连接和操作关系型数据库的<strong>标准接口</strong>，它定义了一套统一的 API，屏蔽了不同数据库（如 MySQL、Oracle、SQL Server）的底层实现差异，使开发者能通过统一的代码操作各种数据库。</p><h2 id="一、jdbc-核心原理" tabindex="-1">一、JDBC 核心原理 <a class="header-anchor" href="#一、jdbc-核心原理" aria-label="Permalink to &quot;一、JDBC 核心原理&quot;">​</a></h2><p>JDBC 的核心是「接口 + 数据库厂商实现」的设计模式：</p><ul><li>Java 官方提供 <code>java.sql</code> 和 <code>javax.sql</code> 包下的核心接口（如 <code>Connection</code>、<code>Statement</code> 等）；</li><li>数据库厂商提供对应接口的实现类（封装在 <strong>JDBC 驱动 Jar 包</strong> 中，如 MySQL 的 <code>mysql-connector-java</code>）；</li><li>开发者通过调用标准接口，间接使用厂商实现类完成数据库连接和操作。</li></ul><h2 id="二、jdbc-操作完整流程-mysql-示例" tabindex="-1">二、JDBC 操作完整流程（MySQL 示例） <a class="header-anchor" href="#二、jdbc-操作完整流程-mysql-示例" aria-label="Permalink to &quot;二、JDBC 操作完整流程（MySQL 示例）&quot;">​</a></h2><h3 id="_1-前置准备-引入数据库驱动-jar-包" tabindex="-1">1. 前置准备：引入数据库驱动 Jar 包 <a class="header-anchor" href="#_1-前置准备-引入数据库驱动-jar-包" aria-label="Permalink to &quot;1. 前置准备：引入数据库驱动 Jar 包&quot;">​</a></h3><p>JDBC 接口本身不包含数据库连接逻辑，必须引入对应数据库的驱动 Jar 包，才能实现协议层面的通信：</p><ul><li><strong>MySQL 驱动</strong>：Maven 依赖（推荐） <ul><li><div class="language-XML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">XML</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!-- MySQL 8.0+ 驱动（兼容 5.x，包名变更为 com.mysql.cj.jdbc.Driver） --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;mysql-connector-java&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;8.0.33&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></li></ul></li><li><strong>手动导入</strong>：下载 Jar 包后，添加到项目的 <code>lib</code> 目录并配置依赖（适用于非 Maven 项目）。</li></ul><h3 id="_2-注册驱动-加载驱动类" tabindex="-1">2. 注册驱动（加载驱动类） <a class="header-anchor" href="#_2-注册驱动-加载驱动类" aria-label="Permalink to &quot;2. 注册驱动（加载驱动类）&quot;">​</a></h3><p>目的是将数据库驱动类加载到 JVM 中，让 <code>DriverManager</code> 能识别并管理该驱动。</p><ul><li><strong>传统方式</strong>（MySQL 5.x 及以下）： <ul><li><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 显式加载驱动类，底层调用 DriverManager.registerDriver(new Driver())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Class.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.mysql.jdbc.Driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div></li></ul></li><li><strong>MySQL 8.0+ 方式</strong>（包名变更，且可省略注册步骤）： <ul><li><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Class.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 注：MySQL 8.0+ 驱动支持 SPI 自动注册，可省略 Class.forName()，但建议显式声明以提高可读性</span></span></code></pre></div></li></ul></li></ul><h3 id="_3-获取数据库连接-connection" tabindex="-1">3. 获取数据库连接（Connection） <a class="header-anchor" href="#_3-获取数据库连接-connection" aria-label="Permalink to &quot;3. 获取数据库连接（Connection）&quot;">​</a></h3><p>通过 <code>DriverManager</code> 的静态方法获取 <code>Connection</code> 对象，该对象代表 Java 与数据库的<strong>物理连接</strong>。</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 连接 URL 格式：jdbc:数据库类型://主机地址:端口号/数据库名?参数1&amp;参数2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;jdbc:mysql://localhost:3306/test?useSSL=false&amp;serverTimezone=UTC&amp;allowPublicKeyRetrieval=true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 数据库用户名</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String password </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;123456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 数据库密码</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 获取连接（JDBC 4.0+ 可自动加载驱动，无需手动注册）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, username, password);</span></span></code></pre></div><ul><li><strong>URL 核心参数说明</strong>： <ul><li><code>useSSL=false</code>：禁用 SSL 连接（开发环境常用，生产环境建议开启）；</li><li><code>serverTimezone=UTC</code>：指定时区（MySQL 8.0+ 必传，否则报错）；</li><li><code>allowPublicKeyRetrieval=true</code>：允许获取服务器公钥（解决密码加密相关报错）。</li></ul></li></ul><h3 id="_4-定义-sql-语句" tabindex="-1">4. 定义 SQL 语句 <a class="header-anchor" href="#_4-定义-sql-语句" aria-label="Permalink to &quot;4. 定义 SQL 语句&quot;">​</a></h3><p>根据业务需求编写 SQL（DQL 查询、DML 增删改、DDL 建表等）：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// DQL 查询示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String sql </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;select id, username from user where age &gt; ?&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// DML 插入示例</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// String sql = &quot;insert into user(username, age) values(?, ?)&quot;;</span></span></code></pre></div><h3 id="_5-创建执行-sql-的对象" tabindex="-1">5. 创建执行 SQL 的对象 <a class="header-anchor" href="#_5-创建执行-sql-的对象" aria-label="Permalink to &quot;5. 创建执行 SQL 的对象&quot;">​</a></h3><p>有两种核心对象用于执行 SQL：<code>Statement</code> 和 <code>PreparedStatement</code>（推荐后者）。</p><h4 id="_1-statement-基础执行对象" tabindex="-1">（1）Statement（基础执行对象） <a class="header-anchor" href="#_1-statement-基础执行对象" aria-label="Permalink to &quot;（1）Statement（基础执行对象）&quot;">​</a></h4><p>直接执行静态 SQL，无预编译机制，<strong>存在 SQL 注入风险</strong>，仅适用于简单场景。</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Statement st </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h4 id="_2-preparedstatement-预编译执行对象" tabindex="-1">（2）PreparedStatement（预编译执行对象） <a class="header-anchor" href="#_2-preparedstatement-预编译执行对象" aria-label="Permalink to &quot;（2）PreparedStatement（预编译执行对象）&quot;">​</a></h4><ul><li>继承自 <code>Statement</code>，支持 SQL 预编译和参数绑定，<strong>彻底防止 SQL 注入</strong>；</li><li>用 <code>?</code> 作为占位符，通过 <code>setXxx(index, value)</code> 方法赋值（index 从 1 开始）。</li></ul><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 传入带占位符的 SQL，创建预编译对象（预编译操作在数据库端执行）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PreparedStatement pst </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepareStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sql);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 为占位符赋值（第一个 ? 赋值为 18，第二个 ? 赋值为 &quot;zhangsan&quot;，根据 SQL 调整）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 对应 age &gt; ?</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// pst.setString(2, &quot;zhangsan&quot;);</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 若有多个占位符，依次赋值</span></span></code></pre></div><h3 id="_6-执行-sql-语句" tabindex="-1">6. 执行 SQL 语句 <a class="header-anchor" href="#_6-执行-sql-语句" aria-label="Permalink to &quot;6. 执行 SQL 语句&quot;">​</a></h3><p>根据 SQL 类型选择不同的执行方法：</p><table tabindex="0"><thead><tr><th>执行方法</th><th>适用场景</th><th>返回值说明</th></tr></thead><tbody><tr><td><code>executeQuery(sql)</code></td><td>DQL 语句（select）</td><td>返回 <code>ResultSet</code> 对象（封装查询结果集）</td></tr><tr><td><code>executeUpdate(sql)</code></td><td>DML（insert/update/delete）、DDL（create/drop）</td><td>DML 返回影响的行数；DDL 返回 0</td></tr><tr><td><code>execute(sql)</code></td><td>通用（支持任意 SQL）</td><td>返回 boolean：true 表示有结果集（如 select），false 表示无结果集</td></tr></tbody></table><h4 id="示例-1-执行-dql-查询-返回结果集" tabindex="-1">示例 1：执行 DQL 查询（返回结果集） <a class="header-anchor" href="#示例-1-执行-dql-查询-返回结果集" aria-label="Permalink to &quot;示例 1：执行 DQL 查询（返回结果集）&quot;">​</a></h4><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 执行查询，获取结果集</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ResultSet rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h4 id="示例-2-执行-dml-插入-返回影响行数" tabindex="-1">示例 2：执行 DML 插入（返回影响行数） <a class="header-anchor" href="#示例-2-执行-dml-插入-返回影响行数" aria-label="Permalink to &quot;示例 2：执行 DML 插入（返回影响行数）&quot;">​</a></h4><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String sql </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;insert into user(username, age) values(?, ?)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PreparedStatement pst </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepareStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sql);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;lisi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> affectedRows </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeUpdate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 返回插入成功的行数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;插入成功：&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> affectedRows </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot; 条数据&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="_7-处理执行结果" tabindex="-1">7. 处理执行结果 <a class="header-anchor" href="#_7-处理执行结果" aria-label="Permalink to &quot;7. 处理执行结果&quot;">​</a></h3><h4 id="_1-处理-resultset-结果集-dql-查询后" tabindex="-1">（1）处理 ResultSet 结果集（DQL 查询后） <a class="header-anchor" href="#_1-处理-resultset-结果集-dql-查询后" aria-label="Permalink to &quot;（1）处理 ResultSet 结果集（DQL 查询后）&quot;">​</a></h4><p><code>ResultSet</code> 是查询结果的封装对象，本质是一个<strong>游标（指针）</strong>，初始指向结果集第一行之前，需通过 <code>rs.next()</code> 移动游标：</p><ul><li><code>rs.next()</code>：游标向下移动一行，返回 <code>true</code> 表示当前行有数据，<code>false</code> 表示已到结果集末尾；</li><li>通过 <code>rs.getXxx(columnName)</code> 或 <code>rs.getXxx(columnIndex)</code> 获取字段值（推荐用列名，避免列顺序变更导致错误）。</li></ul><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 遍历结果集</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 根据列名获取值（推荐）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    String username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 根据列索引获取值（不推荐，列顺序变更会报错）</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // int id = rs.getInt(1);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // String username = rs.getString(2);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;, username: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-处理影响行数-dml-ddl-执行后" tabindex="-1">（2）处理影响行数（DML/DDL 执行后） <a class="header-anchor" href="#_2-处理影响行数-dml-ddl-执行后" aria-label="Permalink to &quot;（2）处理影响行数（DML/DDL 执行后）&quot;">​</a></h4><p>通过 <code>executeUpdate()</code> 的返回值判断操作结果：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (affectedRows </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;操作成功！&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;操作失败（如无匹配数据更新）！&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_8-释放资源-关键步骤" tabindex="-1">8. 释放资源（关键步骤） <a class="header-anchor" href="#_8-释放资源-关键步骤" aria-label="Permalink to &quot;8. 释放资源（关键步骤）&quot;">​</a></h3><p>JDBC 资源（<code>ResultSet</code>、<code>Statement/PreparedStatement</code>、<code>Connection</code>）属于稀缺资源，必须手动释放，否则会导致数据库连接泄漏。</p><p><strong>推荐使用 try-with-resources 自动关闭资源</strong>（Java 7+ 特性，无需手动写 finally）：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 资源声明在 try() 中，自动关闭（关闭顺序：ResultSet → Statement → Connection）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Connection conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DriverManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getConnection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url, username, password);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     PreparedStatement pst </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepareStatement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sql);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     ResultSet rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">executeQuery</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 为占位符赋值</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 遍历结果集</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">next</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SQLException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>传统手动关闭方式</strong>（Java 7 之前）：</p><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ResultSet rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PreparedStatement pst </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Connection conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1. 注册驱动、获取连接、创建对象、执行 SQL、处理结果...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (SQLException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 关闭顺序：先开后关（ResultSet → Statement → Connection）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) rs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (pst </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) pst.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="三、jdbc-核心-api-详解" tabindex="-1">三、JDBC 核心 API 详解 <a class="header-anchor" href="#三、jdbc-核心-api-详解" aria-label="Permalink to &quot;三、JDBC 核心 API 详解&quot;">​</a></h2><h3 id="_1-drivermanager-驱动管理类" tabindex="-1">1. DriverManager（驱动管理类） <a class="header-anchor" href="#_1-drivermanager-驱动管理类" aria-label="Permalink to &quot;1. DriverManager（驱动管理类）&quot;">​</a></h3><ul><li>核心作用：管理数据库驱动、获取数据库连接；</li><li>关键方法： <ul><li><code>registerDriver(Driver driver)</code>：手动注册驱动（不推荐，<code>Class.forName()</code> 底层已调用）；</li><li><code>getConnection(String url, String user, String password)</code>：获取数据库连接；</li><li><code>setLoginTimeout(int seconds)</code>：设置连接超时时间（默认 0，无限制）。</li></ul></li></ul><h3 id="_2-connection-数据库连接对象" tabindex="-1">2. Connection（数据库连接对象） <a class="header-anchor" href="#_2-connection-数据库连接对象" aria-label="Permalink to &quot;2. Connection（数据库连接对象）&quot;">​</a></h3><ul><li>代表 Java 与数据库的物理连接，是所有操作的基础；</li><li>核心功能： <ul><li><strong>创建执行对象</strong>：<code>createStatement()</code>、<code>prepareStatement(String sql)</code>；</li><li><strong>事务管理</strong>（默认自动提交事务）： <ul><li><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAutoCommit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 关闭自动提交，开启手动事务</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 提交事务（操作成功后执行）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rollback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 回滚事务（操作失败时执行，如 catch 异常中）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  conn.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSavepoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 设置事务保存点（部分回滚用）</span></span></code></pre></div></li></ul></li><li><strong>关闭连接</strong>：<code>close()</code>（必须调用，释放资源）。</li></ul></li></ul><h3 id="_3-statement-sql-执行对象" tabindex="-1">3. Statement（SQL 执行对象） <a class="header-anchor" href="#_3-statement-sql-执行对象" aria-label="Permalink to &quot;3. Statement（SQL 执行对象）&quot;">​</a></h3><ul><li>执行静态 SQL 语句（无预编译）；</li><li>关键方法： <ul><li><code>executeQuery(String sql)</code>：执行 DQL，返回 <code>ResultSet</code>；</li><li><code>executeUpdate(String sql)</code>：执行 DML/DDL，返回影响行数；</li><li>缺点：SQL 注入风险，例如： <ul><li><div class="language-Java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 恶意输入：username = &quot; &#39; or &#39;1&#39;=&#39;1 &quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  String sql </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;select * from user where username = &#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 拼接后 SQL：select * from user where username = &#39;&#39; or &#39;1&#39;=&#39;1&#39; → 恒成立，查询所有数据</span></span></code></pre></div></li></ul></li></ul></li></ul><h3 id="_4-preparedstatement-预编译执行对象" tabindex="-1">4. PreparedStatement（预编译执行对象） <a class="header-anchor" href="#_4-preparedstatement-预编译执行对象" aria-label="Permalink to &quot;4. PreparedStatement（预编译执行对象）&quot;">​</a></h3><ul><li>解决 SQL 注入的核心：预编译时将 SQL 结构与参数分离，参数自动转义（如单引号 <code>&#39;</code> 转译为 <code>&#39;</code>）；</li><li>关键方法（除继承 Statement 的方法外）： <ul><li><code>setXxx(int parameterIndex, Xxx value)</code>：为占位符赋值（<code>Xxx</code> 为数据类型，如 <code>setInt</code>、<code>setString</code>、<code>setDate</code>）；</li><li><code>getGeneratedKeys()</code>：获取插入操作生成的自增主键（如 <code>id</code> 自增时）。</li></ul></li></ul><h3 id="_5-resultset-结果集对象" tabindex="-1">5. ResultSet（结果集对象） <a class="header-anchor" href="#_5-resultset-结果集对象" aria-label="Permalink to &quot;5. ResultSet（结果集对象）&quot;">​</a></h3><ul><li>封装 DQL 查询结果，通过游标遍历；</li><li>关键方法： <ul><li>游标操作：<code>next()</code>（向下移动）、<code>previous()</code>（向上移动）、<code>beforeFirst()</code>（回到初始位置）；</li><li>取值操作：<code>getInt(String columnName)</code>、<code>getString(int columnIndex)</code>、<code>getDate(String columnLabel)</code> 等；</li><li>关闭资源：<code>close()</code>（必须关闭，否则占用内存）。</li></ul></li></ul><h2 id="四、jdbc-常见问题与优化" tabindex="-1">四、JDBC 常见问题与优化 <a class="header-anchor" href="#四、jdbc-常见问题与优化" aria-label="Permalink to &quot;四、JDBC 常见问题与优化&quot;">​</a></h2><h3 id="_1-sql-注入问题" tabindex="-1">1. SQL 注入问题 <a class="header-anchor" href="#_1-sql-注入问题" aria-label="Permalink to &quot;1. SQL 注入问题&quot;">​</a></h3><ul><li>原因：使用 <code>Statement</code> 拼接 SQL 时，用户输入的恶意字符（如 <code>&#39;</code>、<code>or</code>）被解析为 SQL 逻辑；</li><li>解决方案：强制使用 <code>PreparedStatement</code>，所有参数通过占位符 <code>?</code> 传入。</li></ul><h3 id="_2-数据库连接泄漏" tabindex="-1">2. 数据库连接泄漏 <a class="header-anchor" href="#_2-数据库连接泄漏" aria-label="Permalink to &quot;2. 数据库连接泄漏&quot;">​</a></h3><ul><li>原因：<code>Connection</code>、<code>Statement</code>、<code>ResultSet</code> 未正确关闭（如异常时未执行 <code>close()</code>）；</li><li>解决方案： <ul><li>使用 try-with-resources 自动关闭资源；</li><li>手动关闭时，将 <code>close()</code> 放在 <code>finally</code> 块中。</li></ul></li></ul><h3 id="_3-性能优化" tabindex="-1">3. 性能优化 <a class="header-anchor" href="#_3-性能优化" aria-label="Permalink to &quot;3. 性能优化&quot;">​</a></h3><ul><li><strong>连接池</strong>：使用 Druid、HikariCP 等连接池管理 <code>Connection</code>，避免频繁创建/关闭连接（连接池复用连接，提升性能）；</li><li><strong>预编译缓存</strong>：<code>PreparedStatement</code> 的预编译结果会被数据库缓存，重复执行相同 SQL 时无需重新编译；</li><li><strong>结果集映射</strong>：使用 ORM 框架（如 MyBatis、JPA）替代手动遍历 <code>ResultSet</code>，简化代码。</li></ul><h3 id="_4-版本兼容问题" tabindex="-1">4. 版本兼容问题 <a class="header-anchor" href="#_4-版本兼容问题" aria-label="Permalink to &quot;4. 版本兼容问题&quot;">​</a></h3><ul><li>MySQL 5.x 驱动包名：<code>com.mysql.jdbc.Driver</code>，URL 无需指定时区；</li><li>MySQL 8.0+ 驱动包名：<code>com.mysql.cj.jdbc.Driver</code>，URL 必须指定 <code>serverTimezone</code> 参数。</li></ul><h2 id="五、总结" tabindex="-1">五、总结 <a class="header-anchor" href="#五、总结" aria-label="Permalink to &quot;五、总结&quot;">​</a></h2><p>JDBC 是 Java 操作关系型数据库的基础，核心流程为「加载驱动 → 获取连接 → 创建执行对象 → 执行 SQL → 处理结果 → 释放资源」。实际开发中，推荐使用 <code>PreparedStatement</code> 防止 SQL 注入，结合连接池提升性能，必要时使用 ORM 框架简化开发。掌握 JDBC 原理和 API，是理解更高层数据访问框架（如 MyBatis）的关键。</p>`,71)])])}const c=i(e,[["render",l]]);export{o as __pageData,c as default};
